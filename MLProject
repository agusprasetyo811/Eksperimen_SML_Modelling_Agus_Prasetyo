name: credit-approval-prediction

conda_env: conda.yaml

entry_points:
  # Test DagsHub connection (optional)
  test_connection:
    command: "python test_dagshub_connection.py"
    
  # Basic modeling with 3 algorithms - FIXED VERSION
  basic_modeling:
    parameters:
      experiment_name: {type: str, default: "credit-approval-basic"}
      model_name: {type: str, default: "credit_approval_model"}
    command: "python modelling.py --experiment_name {experiment_name} --model_name {model_name}"
    
  # Advanced hyperparameter tuning - FIXED VERSION  
  advanced_tuning:
    parameters:
      # Regularization parameters
      alpha: {type: float, default: 0.5}
      l1_ratio: {type: float, default: 0.1}
      
      # Business logic parameters
      min_approval_rate: {type: float, default: 0.3}
      max_approval_rate: {type: float, default: 0.8}
      target_approval_rate: {type: float, default: 0.6}
      
      # Optimization parameters
      n_iter_optuna: {type: int, default: 200}
      grid_search_iter: {type: int, default: 200}
      
      # Model parameters
      random_state: {type: int, default: 42}
      
      # Experiment settings
      experiment_name: {type: str, default: "credit-approval-tuning"}
      model_name: {type: str, default: "credit_approval_model_tuned"}
    command: "python modelling_tuning.py --alpha {alpha} --l1_ratio {l1_ratio} --min_approval_rate {min_approval_rate} --max_approval_rate {max_approval_rate} --target_approval_rate {target_approval_rate} --n_iter_optuna {n_iter_optuna} --grid_search_iter {grid_search_iter} --random_state {random_state} --experiment_name {experiment_name} --model_name {model_name}"

  # Alternative version using shell script (if needed)
  basic_modeling_alt:
    parameters:
      experiment_name: {type: str, default: "credit-approval-basic"}
      model_name: {type: str, default: "credit_approval_model"}
    command: "bash -c 'export EXPERIMENT_NAME={experiment_name} && export MODEL_NAME={model_name} && python modelling.py'"